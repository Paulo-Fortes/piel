{"ast":null,"code":"import { createAnatomy } from '@zag-js/anatomy';\nimport { Selection, ListCollection, GridCollection, isGridCollection } from '@zag-js/collection';\nimport { raf, observeAttributes, getByTypeahead, scrollIntoView, dataAttr, isSelfTarget, getEventKey, getEventTarget, isEditableElement, ariaAttr, isCtrlOrMetaKey, isComposingEvent, getNativeEvent, getWindow } from '@zag-js/dom-query';\nimport { isEqual, createSplitProps, ensure } from '@zag-js/utils';\nimport { createMachine } from '@zag-js/core';\nimport { trackFocusVisible, getInteractionModality } from '@zag-js/focus-visible';\nimport { createProps } from '@zag-js/types';\n\n// src/listbox.anatomy.ts\nvar anatomy = createAnatomy(\"listbox\").parts(\"label\", \"input\", \"item\", \"itemText\", \"itemIndicator\", \"itemGroup\", \"itemGroupLabel\", \"content\", \"root\", \"valueText\");\nvar parts = anatomy.build();\nvar collection = options => {\n  return new ListCollection(options);\n};\ncollection.empty = () => {\n  return new ListCollection({\n    items: []\n  });\n};\nvar gridCollection = options => {\n  return new GridCollection(options);\n};\ngridCollection.empty = () => {\n  return new GridCollection({\n    items: [],\n    columnCount: 0\n  });\n};\n\n// src/listbox.dom.ts\nvar getRootId = ctx => ctx.ids?.root ?? `select:${ctx.id}`;\nvar getContentId = ctx => ctx.ids?.content ?? `select:${ctx.id}:content`;\nvar getLabelId = ctx => ctx.ids?.label ?? `select:${ctx.id}:label`;\nvar getItemId = (ctx, id) => ctx.ids?.item?.(id) ?? `select:${ctx.id}:option:${id}`;\nvar getItemGroupId = (ctx, id) => ctx.ids?.itemGroup?.(id) ?? `select:${ctx.id}:optgroup:${id}`;\nvar getItemGroupLabelId = (ctx, id) => ctx.ids?.itemGroupLabel?.(id) ?? `select:${ctx.id}:optgroup-label:${id}`;\nvar getContentEl = ctx => ctx.getById(getContentId(ctx));\nvar getItemEl = (ctx, id) => ctx.getById(getItemId(ctx, id));\n\n// src/listbox.connect.ts\nfunction connect(service, normalize) {\n  const {\n    context,\n    prop,\n    scope,\n    computed,\n    send\n  } = service;\n  const disabled = prop(\"disabled\");\n  const collection2 = prop(\"collection\");\n  const layout = isGridCollection(collection2) ? \"grid\" : \"list\";\n  const value = context.get(\"value\");\n  const highlightedValue = context.get(\"highlightedValue\");\n  const highlightedItem = context.get(\"highlightedItem\");\n  const selectedItems = context.get(\"selectedItems\");\n  const isTypingAhead = computed(\"isTypingAhead\");\n  const interactive = computed(\"isInteractive\");\n  const ariaActiveDescendant = highlightedValue ? getItemId(scope, highlightedValue) : void 0;\n  function getItemState(props2) {\n    const itemDisabled = collection2.getItemDisabled(props2.item);\n    const value2 = collection2.getItemValue(props2.item);\n    ensure(value2, () => `[zag-js] No value found for item ${JSON.stringify(props2.item)}`);\n    return {\n      value: value2,\n      disabled: Boolean(disabled || itemDisabled),\n      highlighted: highlightedValue === value2 && context.get(\"focused\"),\n      selected: context.get(\"value\").includes(value2)\n    };\n  }\n  return {\n    empty: value.length === 0,\n    highlightedItem,\n    highlightedValue,\n    clearHighlightedValue() {\n      send({\n        type: \"HIGHLIGHTED_VALUE.SET\",\n        value: null\n      });\n    },\n    selectedItems,\n    hasSelectedItems: computed(\"hasSelectedItems\"),\n    value,\n    valueAsString: context.get(\"valueAsString\"),\n    collection: collection2,\n    disabled: !!disabled,\n    selectValue(value2) {\n      send({\n        type: \"ITEM.SELECT\",\n        value: value2\n      });\n    },\n    setValue(value2) {\n      send({\n        type: \"VALUE.SET\",\n        value: value2\n      });\n    },\n    selectAll() {\n      if (!computed(\"multiple\")) {\n        throw new Error(\"[zag-js] Cannot select all items in a single-select listbox\");\n      }\n      send({\n        type: \"VALUE.SET\",\n        value: collection2.getValues()\n      });\n    },\n    highlightValue(value2) {\n      send({\n        type: \"HIGHLIGHTED_VALUE.SET\",\n        value: value2\n      });\n    },\n    clearValue(value2) {\n      if (value2) {\n        send({\n          type: \"ITEM.CLEAR\",\n          value: value2\n        });\n      } else {\n        send({\n          type: \"VALUE.CLEAR\"\n        });\n      }\n    },\n    getItemState,\n    getRootProps() {\n      return normalize.element({\n        ...parts.root.attrs,\n        dir: prop(\"dir\"),\n        id: getRootId(scope),\n        \"data-orientation\": prop(\"orientation\"),\n        \"data-disabled\": dataAttr(disabled)\n      });\n    },\n    getInputProps(props2 = {}) {\n      return normalize.input({\n        ...parts.input.attrs,\n        dir: prop(\"dir\"),\n        disabled,\n        \"data-disabled\": dataAttr(disabled),\n        autoComplete: \"off\",\n        autoCorrect: \"off\",\n        \"aria-haspopup\": \"listbox\",\n        \"aria-controls\": getContentId(scope),\n        \"aria-autocomplete\": \"list\",\n        \"aria-activedescendant\": ariaActiveDescendant,\n        spellCheck: false,\n        enterKeyHint: \"go\",\n        onFocus() {\n          queueMicrotask(() => {\n            const contentEl = getContentEl(scope);\n            const win = getWindow(contentEl);\n            const focusInEvt = new win.FocusEvent(\"focusin\", {\n              bubbles: true,\n              cancelable: true\n            });\n            contentEl?.dispatchEvent(focusInEvt);\n          });\n        },\n        onBlur(event) {\n          if (event.defaultPrevented) return;\n          const contentEl = getContentEl(scope);\n          const win = getWindow(contentEl);\n          const focusOutEvt = new win.FocusEvent(\"focusout\", {\n            bubbles: true,\n            cancelable: true\n          });\n          contentEl?.dispatchEvent(focusOutEvt);\n        },\n        onInput(event) {\n          if (!props2.autoHighlight) return;\n          const node = event.currentTarget;\n          queueMicrotask(() => {\n            if (!node.isConnected) return;\n            send({\n              type: \"HIGHLIGHTED_VALUE.SET\",\n              value: node.value ? prop(\"collection\").firstValue : null\n            });\n          });\n        },\n        onKeyDown(event) {\n          if (event.defaultPrevented) return;\n          if (isComposingEvent(event)) return;\n          const nativeEvent = getNativeEvent(event);\n          switch (nativeEvent.key) {\n            case \"ArrowDown\":\n            case \"ArrowUp\":\n            case \"Home\":\n            case \"End\":\n              {\n                if ((event.key === \"Home\" || event.key === \"End\") && !highlightedValue && event.shiftKey) {\n                  return;\n                }\n                event.preventDefault();\n                const win = scope.getWin();\n                const keyboardEvent = new win.KeyboardEvent(nativeEvent.type, nativeEvent);\n                getContentEl(scope)?.dispatchEvent(keyboardEvent);\n                break;\n              }\n            case \"Enter\":\n              event.preventDefault();\n              send({\n                type: \"ITEM.CLICK\",\n                value: highlightedValue\n              });\n              break;\n          }\n        }\n      });\n    },\n    getLabelProps() {\n      return normalize.element({\n        dir: prop(\"dir\"),\n        id: getLabelId(scope),\n        ...parts.label.attrs,\n        \"data-disabled\": dataAttr(disabled)\n      });\n    },\n    getValueTextProps() {\n      return normalize.element({\n        ...parts.valueText.attrs,\n        dir: prop(\"dir\"),\n        \"data-disabled\": dataAttr(disabled)\n      });\n    },\n    getItemProps(props2) {\n      const itemState = getItemState(props2);\n      return normalize.element({\n        id: getItemId(scope, itemState.value),\n        role: \"option\",\n        ...parts.item.attrs,\n        dir: prop(\"dir\"),\n        \"data-value\": itemState.value,\n        \"aria-selected\": itemState.selected,\n        \"data-selected\": dataAttr(itemState.selected),\n        \"data-layout\": layout,\n        \"data-state\": itemState.selected ? \"checked\" : \"unchecked\",\n        \"data-orientation\": prop(\"orientation\"),\n        \"data-highlighted\": dataAttr(itemState.highlighted),\n        \"data-disabled\": dataAttr(itemState.disabled),\n        \"aria-disabled\": ariaAttr(itemState.disabled),\n        onPointerMove(event) {\n          if (!props2.highlightOnHover) return;\n          if (itemState.disabled || event.pointerType !== \"mouse\") return;\n          if (itemState.highlighted) return;\n          send({\n            type: \"ITEM.POINTER_MOVE\",\n            value: itemState.value\n          });\n        },\n        onMouseDown(event) {\n          event.preventDefault();\n          getContentEl(scope)?.focus();\n        },\n        onClick(event) {\n          if (event.defaultPrevented) return;\n          if (itemState.disabled) return;\n          send({\n            type: \"ITEM.CLICK\",\n            value: itemState.value,\n            shiftKey: event.shiftKey,\n            anchorValue: highlightedValue,\n            metaKey: isCtrlOrMetaKey(event)\n          });\n        }\n      });\n    },\n    getItemTextProps(props2) {\n      const itemState = getItemState(props2);\n      return normalize.element({\n        ...parts.itemText.attrs,\n        \"data-state\": itemState.selected ? \"checked\" : \"unchecked\",\n        \"data-disabled\": dataAttr(itemState.disabled),\n        \"data-highlighted\": dataAttr(itemState.highlighted)\n      });\n    },\n    getItemIndicatorProps(props2) {\n      const itemState = getItemState(props2);\n      return normalize.element({\n        ...parts.itemIndicator.attrs,\n        \"aria-hidden\": true,\n        \"data-state\": itemState.selected ? \"checked\" : \"unchecked\",\n        hidden: !itemState.selected\n      });\n    },\n    getItemGroupLabelProps(props2) {\n      const {\n        htmlFor\n      } = props2;\n      return normalize.element({\n        ...parts.itemGroupLabel.attrs,\n        id: getItemGroupLabelId(scope, htmlFor),\n        dir: prop(\"dir\"),\n        role: \"presentation\"\n      });\n    },\n    getItemGroupProps(props2) {\n      const {\n        id\n      } = props2;\n      return normalize.element({\n        ...parts.itemGroup.attrs,\n        \"data-disabled\": dataAttr(disabled),\n        \"data-orientation\": prop(\"orientation\"),\n        \"data-empty\": dataAttr(collection2.size === 0),\n        id: getItemGroupId(scope, id),\n        \"aria-labelledby\": getItemGroupLabelId(scope, id),\n        role: \"group\",\n        dir: prop(\"dir\")\n      });\n    },\n    getContentProps() {\n      return normalize.element({\n        dir: prop(\"dir\"),\n        id: getContentId(scope),\n        role: \"listbox\",\n        ...parts.content.attrs,\n        \"data-activedescendant\": ariaActiveDescendant,\n        \"aria-activedescendant\": ariaActiveDescendant,\n        \"data-orientation\": prop(\"orientation\"),\n        \"aria-multiselectable\": computed(\"multiple\") ? true : void 0,\n        \"aria-labelledby\": getLabelId(scope),\n        tabIndex: 0,\n        \"data-layout\": layout,\n        \"data-empty\": dataAttr(collection2.size === 0),\n        style: {\n          \"--column-count\": isGridCollection(collection2) ? collection2.columnCount : 1\n        },\n        onFocus() {\n          send({\n            type: \"CONTENT.FOCUS\"\n          });\n        },\n        onBlur() {\n          send({\n            type: \"CONTENT.BLUR\"\n          });\n        },\n        onKeyDown(event) {\n          if (!interactive) return;\n          if (!isSelfTarget(event)) return;\n          const shiftKey = event.shiftKey;\n          const keyMap = {\n            ArrowUp(event2) {\n              let nextValue = null;\n              if (isGridCollection(collection2) && highlightedValue) {\n                nextValue = collection2.getPreviousRowValue(highlightedValue);\n              } else if (highlightedValue) {\n                nextValue = collection2.getPreviousValue(highlightedValue);\n              }\n              if (!nextValue && (prop(\"loopFocus\") || !highlightedValue)) {\n                nextValue = collection2.lastValue;\n              }\n              if (!nextValue) return;\n              event2.preventDefault();\n              send({\n                type: \"NAVIGATE\",\n                value: nextValue,\n                shiftKey,\n                anchorValue: highlightedValue\n              });\n            },\n            ArrowDown(event2) {\n              let nextValue = null;\n              if (isGridCollection(collection2) && highlightedValue) {\n                nextValue = collection2.getNextRowValue(highlightedValue);\n              } else if (highlightedValue) {\n                nextValue = collection2.getNextValue(highlightedValue);\n              }\n              if (!nextValue && (prop(\"loopFocus\") || !highlightedValue)) {\n                nextValue = collection2.firstValue;\n              }\n              if (!nextValue) return;\n              event2.preventDefault();\n              send({\n                type: \"NAVIGATE\",\n                value: nextValue,\n                shiftKey,\n                anchorValue: highlightedValue\n              });\n            },\n            ArrowLeft() {\n              if (!isGridCollection(collection2) && prop(\"orientation\") === \"vertical\") return;\n              let nextValue = highlightedValue ? collection2.getPreviousValue(highlightedValue) : null;\n              if (!nextValue && prop(\"loopFocus\")) {\n                nextValue = collection2.lastValue;\n              }\n              if (!nextValue) return;\n              event.preventDefault();\n              send({\n                type: \"NAVIGATE\",\n                value: nextValue,\n                shiftKey,\n                anchorValue: highlightedValue\n              });\n            },\n            ArrowRight() {\n              if (!isGridCollection(collection2) && prop(\"orientation\") === \"vertical\") return;\n              let nextValue = highlightedValue ? collection2.getNextValue(highlightedValue) : null;\n              if (!nextValue && prop(\"loopFocus\")) {\n                nextValue = collection2.firstValue;\n              }\n              if (!nextValue) return;\n              event.preventDefault();\n              send({\n                type: \"NAVIGATE\",\n                value: nextValue,\n                shiftKey,\n                anchorValue: highlightedValue\n              });\n            },\n            Home(event2) {\n              event2.preventDefault();\n              let nextValue = collection2.firstValue;\n              send({\n                type: \"NAVIGATE\",\n                value: nextValue,\n                shiftKey,\n                anchorValue: highlightedValue\n              });\n            },\n            End(event2) {\n              event2.preventDefault();\n              let nextValue = collection2.lastValue;\n              send({\n                type: \"NAVIGATE\",\n                value: nextValue,\n                shiftKey,\n                anchorValue: highlightedValue\n              });\n            },\n            Enter() {\n              send({\n                type: \"ITEM.CLICK\",\n                value: highlightedValue\n              });\n            },\n            a(event2) {\n              if (isCtrlOrMetaKey(event2) && computed(\"multiple\") && !prop(\"disallowSelectAll\")) {\n                event2.preventDefault();\n                send({\n                  type: \"VALUE.SET\",\n                  value: collection2.getValues()\n                });\n              }\n            },\n            Space(event2) {\n              if (isTypingAhead && prop(\"typeahead\")) {\n                send({\n                  type: \"CONTENT.TYPEAHEAD\",\n                  key: event2.key\n                });\n              } else {\n                keyMap.Enter?.(event2);\n              }\n            },\n            Escape(event2) {\n              if (prop(\"deselectable\") && value.length > 0) {\n                event2.preventDefault();\n                event2.stopPropagation();\n                send({\n                  type: \"VALUE.CLEAR\"\n                });\n              }\n            }\n          };\n          const exec = keyMap[getEventKey(event)];\n          if (exec) {\n            exec(event);\n            return;\n          }\n          const target = getEventTarget(event);\n          if (isEditableElement(target)) {\n            return;\n          }\n          if (getByTypeahead.isValidEvent(event) && prop(\"typeahead\")) {\n            send({\n              type: \"CONTENT.TYPEAHEAD\",\n              key: event.key\n            });\n            event.preventDefault();\n          }\n        }\n      });\n    }\n  };\n}\nvar machine = createMachine({\n  props({\n    props: props2\n  }) {\n    return {\n      loopFocus: false,\n      composite: true,\n      defaultValue: [],\n      multiple: false,\n      typeahead: true,\n      collection: collection.empty(),\n      orientation: \"vertical\",\n      selectionMode: \"single\",\n      ...props2\n    };\n  },\n  context({\n    prop,\n    bindable\n  }) {\n    return {\n      value: bindable(() => ({\n        defaultValue: prop(\"defaultValue\"),\n        value: prop(\"value\"),\n        isEqual,\n        onChange(value) {\n          const items = prop(\"collection\").findMany(value);\n          return prop(\"onValueChange\")?.({\n            value,\n            items\n          });\n        }\n      })),\n      highlightedValue: bindable(() => ({\n        defaultValue: prop(\"defaultHighlightedValue\") || null,\n        value: prop(\"highlightedValue\"),\n        sync: true,\n        onChange(value) {\n          prop(\"onHighlightChange\")?.({\n            highlightedValue: value,\n            highlightedItem: prop(\"collection\").find(value),\n            highlightedIndex: prop(\"collection\").indexOf(value)\n          });\n        }\n      })),\n      highlightedItem: bindable(() => ({\n        defaultValue: null\n      })),\n      selectedItems: bindable(() => {\n        const value = prop(\"value\") ?? prop(\"defaultValue\") ?? [];\n        const items = prop(\"collection\").findMany(value);\n        return {\n          defaultValue: items\n        };\n      }),\n      valueAsString: bindable(() => {\n        const value = prop(\"value\") ?? prop(\"defaultValue\") ?? [];\n        return {\n          defaultValue: prop(\"collection\").stringifyMany(value)\n        };\n      }),\n      focused: bindable(() => ({\n        defaultValue: false\n      }))\n    };\n  },\n  refs({\n    prop\n  }) {\n    return {\n      typeahead: {\n        ...getByTypeahead.defaultOptions\n      },\n      prevCollection: prop(\"collection\")\n    };\n  },\n  computed: {\n    hasSelectedItems: ({\n      context\n    }) => context.get(\"value\").length > 0,\n    isTypingAhead: ({\n      refs\n    }) => refs.get(\"typeahead\").keysSoFar !== \"\",\n    isInteractive: ({\n      prop\n    }) => !prop(\"disabled\"),\n    selection: ({\n      context,\n      prop\n    }) => {\n      const selection = new Selection(context.get(\"value\"));\n      selection.selectionMode = prop(\"selectionMode\");\n      selection.deselectable = !!prop(\"deselectable\");\n      return selection;\n    },\n    multiple: ({\n      prop\n    }) => prop(\"selectionMode\") === \"multiple\" || prop(\"selectionMode\") === \"extended\"\n  },\n  initialState() {\n    return \"idle\";\n  },\n  watch({\n    context,\n    prop,\n    track,\n    action\n  }) {\n    track([() => context.get(\"value\").toString()], () => {\n      action([\"syncSelectedItems\"]);\n    });\n    track([() => context.get(\"highlightedValue\")], () => {\n      action([\"syncHighlightedItem\"]);\n    });\n    track([() => prop(\"collection\").toString()], () => {\n      action([\"syncCollection\"]);\n    });\n  },\n  effects: [\"trackFocusVisible\"],\n  on: {\n    \"HIGHLIGHTED_VALUE.SET\": {\n      actions: [\"setHighlightedItem\"]\n    },\n    \"ITEM.SELECT\": {\n      actions: [\"selectItem\"]\n    },\n    \"ITEM.CLEAR\": {\n      actions: [\"clearItem\"]\n    },\n    \"VALUE.SET\": {\n      actions: [\"setSelectedItems\"]\n    },\n    \"VALUE.CLEAR\": {\n      actions: [\"clearSelectedItems\"]\n    },\n    \"CLEAR.CLICK\": {\n      actions: [\"clearSelectedItems\"]\n    }\n  },\n  states: {\n    idle: {\n      effects: [\"scrollToHighlightedItem\"],\n      on: {\n        \"CONTENT.FOCUS\": {\n          actions: [\"setFocused\"]\n        },\n        \"CONTENT.BLUR\": {\n          actions: [\"clearFocused\"]\n        },\n        \"ITEM.CLICK\": {\n          actions: [\"setHighlightedItem\", \"selectHighlightedItem\"]\n        },\n        \"CONTENT.TYPEAHEAD\": {\n          actions: [\"highlightMatchingItem\"]\n        },\n        \"ITEM.POINTER_MOVE\": {\n          actions: [\"highlightItem\"]\n        },\n        \"ITEM.POINTER_LEAVE\": {\n          actions: [\"clearHighlightedItem\"]\n        },\n        NAVIGATE: {\n          actions: [\"setHighlightedItem\", \"selectWithKeyboard\"]\n        }\n      }\n    }\n  },\n  implementations: {\n    effects: {\n      trackFocusVisible: ({\n        scope\n      }) => {\n        return trackFocusVisible({\n          root: scope.getRootNode?.()\n        });\n      },\n      scrollToHighlightedItem({\n        context,\n        prop,\n        scope\n      }) {\n        const exec = immediate => {\n          const highlightedValue = context.get(\"highlightedValue\");\n          if (highlightedValue == null) return;\n          const modality = getInteractionModality();\n          if (modality !== \"keyboard\") return;\n          const itemEl = getItemEl(scope, highlightedValue);\n          const contentEl2 = getContentEl(scope);\n          const scrollToIndexFn = prop(\"scrollToIndexFn\");\n          if (scrollToIndexFn) {\n            const highlightedIndex = prop(\"collection\").indexOf(highlightedValue);\n            scrollToIndexFn?.({\n              index: highlightedIndex,\n              immediate\n            });\n            return;\n          }\n          scrollIntoView(itemEl, {\n            rootEl: contentEl2,\n            block: \"nearest\"\n          });\n        };\n        raf(() => exec(true));\n        const contentEl = () => getContentEl(scope);\n        return observeAttributes(contentEl, {\n          defer: true,\n          attributes: [\"data-activedescendant\"],\n          callback() {\n            exec(false);\n          }\n        });\n      }\n    },\n    actions: {\n      selectHighlightedItem({\n        context,\n        prop,\n        event,\n        computed\n      }) {\n        const value = event.value ?? context.get(\"highlightedValue\");\n        if (value == null) return;\n        const selection = computed(\"selection\");\n        const collection2 = prop(\"collection\");\n        if (event.shiftKey && computed(\"multiple\") && event.anchorValue) {\n          const next = selection.extendSelection(collection2, event.anchorValue, value);\n          invokeOnSelect(selection, next, prop(\"onSelect\"));\n          context.set(\"value\", Array.from(next));\n        } else {\n          const next = selection.select(collection2, value, event.metaKey);\n          invokeOnSelect(selection, next, prop(\"onSelect\"));\n          context.set(\"value\", Array.from(next));\n        }\n      },\n      selectWithKeyboard({\n        context,\n        prop,\n        event,\n        computed\n      }) {\n        const selection = computed(\"selection\");\n        const collection2 = prop(\"collection\");\n        if (event.shiftKey && computed(\"multiple\") && event.anchorValue) {\n          const next = selection.extendSelection(collection2, event.anchorValue, event.value);\n          invokeOnSelect(selection, next, prop(\"onSelect\"));\n          context.set(\"value\", Array.from(next));\n          return;\n        }\n        if (prop(\"selectOnHighlight\")) {\n          const next = selection.replaceSelection(collection2, event.value);\n          invokeOnSelect(selection, next, prop(\"onSelect\"));\n          context.set(\"value\", Array.from(next));\n        }\n      },\n      highlightItem({\n        context,\n        event\n      }) {\n        context.set(\"highlightedValue\", event.value);\n      },\n      highlightMatchingItem({\n        context,\n        prop,\n        event,\n        refs\n      }) {\n        const value = prop(\"collection\").search(event.key, {\n          state: refs.get(\"typeahead\"),\n          currentValue: context.get(\"highlightedValue\")\n        });\n        if (value == null) return;\n        context.set(\"highlightedValue\", value);\n      },\n      setHighlightedItem({\n        context,\n        event\n      }) {\n        context.set(\"highlightedValue\", event.value);\n      },\n      clearHighlightedItem({\n        context\n      }) {\n        context.set(\"highlightedValue\", null);\n      },\n      selectItem({\n        context,\n        prop,\n        event,\n        computed\n      }) {\n        const collection2 = prop(\"collection\");\n        const selection = computed(\"selection\");\n        const next = selection.select(collection2, event.value);\n        invokeOnSelect(selection, next, prop(\"onSelect\"));\n        context.set(\"value\", Array.from(next));\n      },\n      clearItem({\n        context,\n        event,\n        computed\n      }) {\n        const selection = computed(\"selection\");\n        const value = selection.deselect(event.value);\n        context.set(\"value\", Array.from(value));\n      },\n      setSelectedItems({\n        context,\n        event\n      }) {\n        context.set(\"value\", event.value);\n      },\n      clearSelectedItems({\n        context\n      }) {\n        context.set(\"value\", []);\n      },\n      syncCollection({\n        context,\n        prop,\n        refs\n      }) {\n        const collection2 = prop(\"collection\");\n        const highlightedItem = collection2.find(context.get(\"highlightedValue\"));\n        if (highlightedItem) context.set(\"highlightedItem\", highlightedItem);\n        const selectedItems = collection2.findMany(context.get(\"value\"));\n        context.set(\"selectedItems\", selectedItems);\n        const valueAsString = collection2.stringifyItems(selectedItems);\n        context.set(\"valueAsString\", valueAsString);\n        const highlightedValue = syncHighlightedValue(collection2, refs.get(\"prevCollection\"), context.get(\"highlightedValue\"));\n        queueMicrotask(() => {\n          context.set(\"highlightedValue\", highlightedValue);\n          refs.set(\"prevCollection\", collection2);\n        });\n      },\n      syncSelectedItems({\n        context,\n        prop\n      }) {\n        const collection2 = prop(\"collection\");\n        const prevSelectedItems = context.get(\"selectedItems\");\n        const value = context.get(\"value\");\n        const selectedItems = value.map(value2 => {\n          const item = prevSelectedItems.find(item2 => collection2.getItemValue(item2) === value2);\n          return item || collection2.find(value2);\n        });\n        context.set(\"selectedItems\", selectedItems);\n        context.set(\"valueAsString\", collection2.stringifyItems(selectedItems));\n      },\n      syncHighlightedItem({\n        context,\n        prop\n      }) {\n        const collection2 = prop(\"collection\");\n        const highlightedValue = context.get(\"highlightedValue\");\n        const highlightedItem = highlightedValue ? collection2.find(highlightedValue) : null;\n        context.set(\"highlightedItem\", highlightedItem);\n      },\n      setFocused({\n        context\n      }) {\n        context.set(\"focused\", true);\n      },\n      clearFocused({\n        context\n      }) {\n        context.set(\"focused\", false);\n      }\n    }\n  }\n});\nvar diff = (a, b) => {\n  const result = new Set(a);\n  for (const item of b) result.delete(item);\n  return result;\n};\nfunction invokeOnSelect(current, next, onSelect) {\n  const added = diff(next, current);\n  for (const item of added) {\n    onSelect?.({\n      value: item\n    });\n  }\n}\nfunction syncHighlightedValue(collection2, prevCollection, highlightedValue) {\n  if (highlightedValue != null && !collection2.find(highlightedValue) && prevCollection) {\n    const startIndex = prevCollection.indexOf(highlightedValue);\n    const prevItems = [...prevCollection.items];\n    const items = [...collection2.items];\n    const diff2 = (prevItems?.length ?? 0) - (items?.length ?? 0);\n    let index = Math.min(diff2 > 1 ? Math.max((startIndex ?? 0) - diff2 + 1, 0) : startIndex ?? 0, (items?.length ?? 0) - 1);\n    let newValue = null;\n    let isReverseSearching = false;\n    while (index >= 0) {\n      if (!collection2.getItemDisabled(items[index])) {\n        newValue = collection2.getItemValue(items[index]);\n        break;\n      }\n      if (index < items.length - 1 && !isReverseSearching) {\n        index++;\n      } else {\n        isReverseSearching = true;\n        if (index > (startIndex ?? 0)) {\n          index = startIndex ?? 0;\n        }\n        index--;\n      }\n    }\n    return newValue;\n  }\n  return null;\n}\nvar props = createProps()([\"collection\", \"defaultHighlightedValue\", \"defaultValue\", \"dir\", \"disabled\", \"deselectable\", \"disallowSelectAll\", \"getRootNode\", \"highlightedValue\", \"id\", \"ids\", \"loopFocus\", \"onHighlightChange\", \"onSelect\", \"onValueChange\", \"orientation\", \"scrollToIndexFn\", \"selectionMode\", \"selectOnHighlight\", \"typeahead\", \"value\"]);\nvar splitProps = createSplitProps(props);\nvar itemProps = createProps()([\"item\", \"highlightOnHover\"]);\nvar splitItemProps = createSplitProps(itemProps);\nvar itemGroupProps = createProps()([\"id\"]);\nvar splitItemGroupProps = createSplitProps(itemGroupProps);\nvar itemGroupLabelProps = createProps()([\"htmlFor\"]);\nvar splitItemGroupLabelProps = createSplitProps(itemGroupLabelProps);\nexport { anatomy, collection, connect, gridCollection, itemGroupLabelProps, itemGroupProps, itemProps, machine, props, splitItemGroupLabelProps, splitItemGroupProps, splitItemProps, splitProps };","map":{"version":3,"names":["createAnatomy","Selection","ListCollection","GridCollection","isGridCollection","raf","observeAttributes","getByTypeahead","scrollIntoView","dataAttr","isSelfTarget","getEventKey","getEventTarget","isEditableElement","ariaAttr","isCtrlOrMetaKey","isComposingEvent","getNativeEvent","getWindow","isEqual","createSplitProps","ensure","createMachine","trackFocusVisible","getInteractionModality","createProps","anatomy","parts","build","collection","options","empty","items","gridCollection","columnCount","getRootId","ctx","ids","root","id","getContentId","content","getLabelId","label","getItemId","item","getItemGroupId","itemGroup","getItemGroupLabelId","itemGroupLabel","getContentEl","getById","getItemEl","connect","service","normalize","context","prop","scope","computed","send","disabled","collection2","layout","value","get","highlightedValue","highlightedItem","selectedItems","isTypingAhead","interactive","ariaActiveDescendant","getItemState","props2","itemDisabled","getItemDisabled","value2","getItemValue","JSON","stringify","Boolean","highlighted","selected","includes","length","clearHighlightedValue","type","hasSelectedItems","valueAsString","selectValue","setValue","selectAll","Error","getValues","highlightValue","clearValue","getRootProps","element","attrs","dir","getInputProps","input","autoComplete","autoCorrect","spellCheck","enterKeyHint","onFocus","queueMicrotask","contentEl","win","focusInEvt","FocusEvent","bubbles","cancelable","dispatchEvent","onBlur","event","defaultPrevented","focusOutEvt","onInput","autoHighlight","node","currentTarget","isConnected","firstValue","onKeyDown","nativeEvent","key","shiftKey","preventDefault","getWin","keyboardEvent","KeyboardEvent","getLabelProps","getValueTextProps","valueText","getItemProps","itemState","role","onPointerMove","highlightOnHover","pointerType","onMouseDown","focus","onClick","anchorValue","metaKey","getItemTextProps","itemText","getItemIndicatorProps","itemIndicator","hidden","getItemGroupLabelProps","htmlFor","getItemGroupProps","size","getContentProps","tabIndex","style","keyMap","ArrowUp","event2","nextValue","getPreviousRowValue","getPreviousValue","lastValue","ArrowDown","getNextRowValue","getNextValue","ArrowLeft","ArrowRight","Home","End","Enter","a","Space","Escape","stopPropagation","exec","target","isValidEvent","machine","props","loopFocus","composite","defaultValue","multiple","typeahead","orientation","selectionMode","bindable","onChange","findMany","sync","find","highlightedIndex","indexOf","stringifyMany","focused","refs","defaultOptions","prevCollection","keysSoFar","isInteractive","selection","deselectable","initialState","watch","track","action","toString","effects","on","actions","states","idle","NAVIGATE","implementations","getRootNode","scrollToHighlightedItem","immediate","modality","itemEl","contentEl2","scrollToIndexFn","index","rootEl","block","defer","attributes","callback","selectHighlightedItem","next","extendSelection","invokeOnSelect","set","Array","from","select","selectWithKeyboard","replaceSelection","highlightItem","highlightMatchingItem","search","state","currentValue","setHighlightedItem","clearHighlightedItem","selectItem","clearItem","deselect","setSelectedItems","clearSelectedItems","syncCollection","stringifyItems","syncHighlightedValue","syncSelectedItems","prevSelectedItems","map","item2","syncHighlightedItem","setFocused","clearFocused","diff","b","result","Set","delete","current","onSelect","added","startIndex","prevItems","diff2","Math","min","max","newValue","isReverseSearching","splitProps","itemProps","splitItemProps","itemGroupProps","splitItemGroupProps","itemGroupLabelProps","splitItemGroupLabelProps"],"sources":["C:/Users/Samsung/Desktop/TEC DESARROLLO DE SOFTWARE/5ยบ CUATRIMESTRE/piel/client/node_modules/@zag-js/listbox/dist/index.mjs"],"sourcesContent":["import { createAnatomy } from '@zag-js/anatomy';\r\nimport { Selection, ListCollection, GridCollection, isGridCollection } from '@zag-js/collection';\r\nimport { raf, observeAttributes, getByTypeahead, scrollIntoView, dataAttr, isSelfTarget, getEventKey, getEventTarget, isEditableElement, ariaAttr, isCtrlOrMetaKey, isComposingEvent, getNativeEvent, getWindow } from '@zag-js/dom-query';\r\nimport { isEqual, createSplitProps, ensure } from '@zag-js/utils';\r\nimport { createMachine } from '@zag-js/core';\r\nimport { trackFocusVisible, getInteractionModality } from '@zag-js/focus-visible';\r\nimport { createProps } from '@zag-js/types';\r\n\r\n// src/listbox.anatomy.ts\r\nvar anatomy = createAnatomy(\"listbox\").parts(\r\n  \"label\",\r\n  \"input\",\r\n  \"item\",\r\n  \"itemText\",\r\n  \"itemIndicator\",\r\n  \"itemGroup\",\r\n  \"itemGroupLabel\",\r\n  \"content\",\r\n  \"root\",\r\n  \"valueText\"\r\n);\r\nvar parts = anatomy.build();\r\nvar collection = (options) => {\r\n  return new ListCollection(options);\r\n};\r\ncollection.empty = () => {\r\n  return new ListCollection({ items: [] });\r\n};\r\nvar gridCollection = (options) => {\r\n  return new GridCollection(options);\r\n};\r\ngridCollection.empty = () => {\r\n  return new GridCollection({ items: [], columnCount: 0 });\r\n};\r\n\r\n// src/listbox.dom.ts\r\nvar getRootId = (ctx) => ctx.ids?.root ?? `select:${ctx.id}`;\r\nvar getContentId = (ctx) => ctx.ids?.content ?? `select:${ctx.id}:content`;\r\nvar getLabelId = (ctx) => ctx.ids?.label ?? `select:${ctx.id}:label`;\r\nvar getItemId = (ctx, id) => ctx.ids?.item?.(id) ?? `select:${ctx.id}:option:${id}`;\r\nvar getItemGroupId = (ctx, id) => ctx.ids?.itemGroup?.(id) ?? `select:${ctx.id}:optgroup:${id}`;\r\nvar getItemGroupLabelId = (ctx, id) => ctx.ids?.itemGroupLabel?.(id) ?? `select:${ctx.id}:optgroup-label:${id}`;\r\nvar getContentEl = (ctx) => ctx.getById(getContentId(ctx));\r\nvar getItemEl = (ctx, id) => ctx.getById(getItemId(ctx, id));\r\n\r\n// src/listbox.connect.ts\r\nfunction connect(service, normalize) {\r\n  const { context, prop, scope, computed, send } = service;\r\n  const disabled = prop(\"disabled\");\r\n  const collection2 = prop(\"collection\");\r\n  const layout = isGridCollection(collection2) ? \"grid\" : \"list\";\r\n  const value = context.get(\"value\");\r\n  const highlightedValue = context.get(\"highlightedValue\");\r\n  const highlightedItem = context.get(\"highlightedItem\");\r\n  const selectedItems = context.get(\"selectedItems\");\r\n  const isTypingAhead = computed(\"isTypingAhead\");\r\n  const interactive = computed(\"isInteractive\");\r\n  const ariaActiveDescendant = highlightedValue ? getItemId(scope, highlightedValue) : void 0;\r\n  function getItemState(props2) {\r\n    const itemDisabled = collection2.getItemDisabled(props2.item);\r\n    const value2 = collection2.getItemValue(props2.item);\r\n    ensure(value2, () => `[zag-js] No value found for item ${JSON.stringify(props2.item)}`);\r\n    return {\r\n      value: value2,\r\n      disabled: Boolean(disabled || itemDisabled),\r\n      highlighted: highlightedValue === value2 && context.get(\"focused\"),\r\n      selected: context.get(\"value\").includes(value2)\r\n    };\r\n  }\r\n  return {\r\n    empty: value.length === 0,\r\n    highlightedItem,\r\n    highlightedValue,\r\n    clearHighlightedValue() {\r\n      send({ type: \"HIGHLIGHTED_VALUE.SET\", value: null });\r\n    },\r\n    selectedItems,\r\n    hasSelectedItems: computed(\"hasSelectedItems\"),\r\n    value,\r\n    valueAsString: context.get(\"valueAsString\"),\r\n    collection: collection2,\r\n    disabled: !!disabled,\r\n    selectValue(value2) {\r\n      send({ type: \"ITEM.SELECT\", value: value2 });\r\n    },\r\n    setValue(value2) {\r\n      send({ type: \"VALUE.SET\", value: value2 });\r\n    },\r\n    selectAll() {\r\n      if (!computed(\"multiple\")) {\r\n        throw new Error(\"[zag-js] Cannot select all items in a single-select listbox\");\r\n      }\r\n      send({ type: \"VALUE.SET\", value: collection2.getValues() });\r\n    },\r\n    highlightValue(value2) {\r\n      send({ type: \"HIGHLIGHTED_VALUE.SET\", value: value2 });\r\n    },\r\n    clearValue(value2) {\r\n      if (value2) {\r\n        send({ type: \"ITEM.CLEAR\", value: value2 });\r\n      } else {\r\n        send({ type: \"VALUE.CLEAR\" });\r\n      }\r\n    },\r\n    getItemState,\r\n    getRootProps() {\r\n      return normalize.element({\r\n        ...parts.root.attrs,\r\n        dir: prop(\"dir\"),\r\n        id: getRootId(scope),\r\n        \"data-orientation\": prop(\"orientation\"),\r\n        \"data-disabled\": dataAttr(disabled)\r\n      });\r\n    },\r\n    getInputProps(props2 = {}) {\r\n      return normalize.input({\r\n        ...parts.input.attrs,\r\n        dir: prop(\"dir\"),\r\n        disabled,\r\n        \"data-disabled\": dataAttr(disabled),\r\n        autoComplete: \"off\",\r\n        autoCorrect: \"off\",\r\n        \"aria-haspopup\": \"listbox\",\r\n        \"aria-controls\": getContentId(scope),\r\n        \"aria-autocomplete\": \"list\",\r\n        \"aria-activedescendant\": ariaActiveDescendant,\r\n        spellCheck: false,\r\n        enterKeyHint: \"go\",\r\n        onFocus() {\r\n          queueMicrotask(() => {\r\n            const contentEl = getContentEl(scope);\r\n            const win = getWindow(contentEl);\r\n            const focusInEvt = new win.FocusEvent(\"focusin\", { bubbles: true, cancelable: true });\r\n            contentEl?.dispatchEvent(focusInEvt);\r\n          });\r\n        },\r\n        onBlur(event) {\r\n          if (event.defaultPrevented) return;\r\n          const contentEl = getContentEl(scope);\r\n          const win = getWindow(contentEl);\r\n          const focusOutEvt = new win.FocusEvent(\"focusout\", { bubbles: true, cancelable: true });\r\n          contentEl?.dispatchEvent(focusOutEvt);\r\n        },\r\n        onInput(event) {\r\n          if (!props2.autoHighlight) return;\r\n          const node = event.currentTarget;\r\n          queueMicrotask(() => {\r\n            if (!node.isConnected) return;\r\n            send({\r\n              type: \"HIGHLIGHTED_VALUE.SET\",\r\n              value: node.value ? prop(\"collection\").firstValue : null\r\n            });\r\n          });\r\n        },\r\n        onKeyDown(event) {\r\n          if (event.defaultPrevented) return;\r\n          if (isComposingEvent(event)) return;\r\n          const nativeEvent = getNativeEvent(event);\r\n          switch (nativeEvent.key) {\r\n            case \"ArrowDown\":\r\n            case \"ArrowUp\":\r\n            case \"Home\":\r\n            case \"End\": {\r\n              if ((event.key === \"Home\" || event.key === \"End\") && !highlightedValue && event.shiftKey) {\r\n                return;\r\n              }\r\n              event.preventDefault();\r\n              const win = scope.getWin();\r\n              const keyboardEvent = new win.KeyboardEvent(nativeEvent.type, nativeEvent);\r\n              getContentEl(scope)?.dispatchEvent(keyboardEvent);\r\n              break;\r\n            }\r\n            case \"Enter\":\r\n              event.preventDefault();\r\n              send({ type: \"ITEM.CLICK\", value: highlightedValue });\r\n              break;\r\n          }\r\n        }\r\n      });\r\n    },\r\n    getLabelProps() {\r\n      return normalize.element({\r\n        dir: prop(\"dir\"),\r\n        id: getLabelId(scope),\r\n        ...parts.label.attrs,\r\n        \"data-disabled\": dataAttr(disabled)\r\n      });\r\n    },\r\n    getValueTextProps() {\r\n      return normalize.element({\r\n        ...parts.valueText.attrs,\r\n        dir: prop(\"dir\"),\r\n        \"data-disabled\": dataAttr(disabled)\r\n      });\r\n    },\r\n    getItemProps(props2) {\r\n      const itemState = getItemState(props2);\r\n      return normalize.element({\r\n        id: getItemId(scope, itemState.value),\r\n        role: \"option\",\r\n        ...parts.item.attrs,\r\n        dir: prop(\"dir\"),\r\n        \"data-value\": itemState.value,\r\n        \"aria-selected\": itemState.selected,\r\n        \"data-selected\": dataAttr(itemState.selected),\r\n        \"data-layout\": layout,\r\n        \"data-state\": itemState.selected ? \"checked\" : \"unchecked\",\r\n        \"data-orientation\": prop(\"orientation\"),\r\n        \"data-highlighted\": dataAttr(itemState.highlighted),\r\n        \"data-disabled\": dataAttr(itemState.disabled),\r\n        \"aria-disabled\": ariaAttr(itemState.disabled),\r\n        onPointerMove(event) {\r\n          if (!props2.highlightOnHover) return;\r\n          if (itemState.disabled || event.pointerType !== \"mouse\") return;\r\n          if (itemState.highlighted) return;\r\n          send({ type: \"ITEM.POINTER_MOVE\", value: itemState.value });\r\n        },\r\n        onMouseDown(event) {\r\n          event.preventDefault();\r\n          getContentEl(scope)?.focus();\r\n        },\r\n        onClick(event) {\r\n          if (event.defaultPrevented) return;\r\n          if (itemState.disabled) return;\r\n          send({\r\n            type: \"ITEM.CLICK\",\r\n            value: itemState.value,\r\n            shiftKey: event.shiftKey,\r\n            anchorValue: highlightedValue,\r\n            metaKey: isCtrlOrMetaKey(event)\r\n          });\r\n        }\r\n      });\r\n    },\r\n    getItemTextProps(props2) {\r\n      const itemState = getItemState(props2);\r\n      return normalize.element({\r\n        ...parts.itemText.attrs,\r\n        \"data-state\": itemState.selected ? \"checked\" : \"unchecked\",\r\n        \"data-disabled\": dataAttr(itemState.disabled),\r\n        \"data-highlighted\": dataAttr(itemState.highlighted)\r\n      });\r\n    },\r\n    getItemIndicatorProps(props2) {\r\n      const itemState = getItemState(props2);\r\n      return normalize.element({\r\n        ...parts.itemIndicator.attrs,\r\n        \"aria-hidden\": true,\r\n        \"data-state\": itemState.selected ? \"checked\" : \"unchecked\",\r\n        hidden: !itemState.selected\r\n      });\r\n    },\r\n    getItemGroupLabelProps(props2) {\r\n      const { htmlFor } = props2;\r\n      return normalize.element({\r\n        ...parts.itemGroupLabel.attrs,\r\n        id: getItemGroupLabelId(scope, htmlFor),\r\n        dir: prop(\"dir\"),\r\n        role: \"presentation\"\r\n      });\r\n    },\r\n    getItemGroupProps(props2) {\r\n      const { id } = props2;\r\n      return normalize.element({\r\n        ...parts.itemGroup.attrs,\r\n        \"data-disabled\": dataAttr(disabled),\r\n        \"data-orientation\": prop(\"orientation\"),\r\n        \"data-empty\": dataAttr(collection2.size === 0),\r\n        id: getItemGroupId(scope, id),\r\n        \"aria-labelledby\": getItemGroupLabelId(scope, id),\r\n        role: \"group\",\r\n        dir: prop(\"dir\")\r\n      });\r\n    },\r\n    getContentProps() {\r\n      return normalize.element({\r\n        dir: prop(\"dir\"),\r\n        id: getContentId(scope),\r\n        role: \"listbox\",\r\n        ...parts.content.attrs,\r\n        \"data-activedescendant\": ariaActiveDescendant,\r\n        \"aria-activedescendant\": ariaActiveDescendant,\r\n        \"data-orientation\": prop(\"orientation\"),\r\n        \"aria-multiselectable\": computed(\"multiple\") ? true : void 0,\r\n        \"aria-labelledby\": getLabelId(scope),\r\n        tabIndex: 0,\r\n        \"data-layout\": layout,\r\n        \"data-empty\": dataAttr(collection2.size === 0),\r\n        style: {\r\n          \"--column-count\": isGridCollection(collection2) ? collection2.columnCount : 1\r\n        },\r\n        onFocus() {\r\n          send({ type: \"CONTENT.FOCUS\" });\r\n        },\r\n        onBlur() {\r\n          send({ type: \"CONTENT.BLUR\" });\r\n        },\r\n        onKeyDown(event) {\r\n          if (!interactive) return;\r\n          if (!isSelfTarget(event)) return;\r\n          const shiftKey = event.shiftKey;\r\n          const keyMap = {\r\n            ArrowUp(event2) {\r\n              let nextValue = null;\r\n              if (isGridCollection(collection2) && highlightedValue) {\r\n                nextValue = collection2.getPreviousRowValue(highlightedValue);\r\n              } else if (highlightedValue) {\r\n                nextValue = collection2.getPreviousValue(highlightedValue);\r\n              }\r\n              if (!nextValue && (prop(\"loopFocus\") || !highlightedValue)) {\r\n                nextValue = collection2.lastValue;\r\n              }\r\n              if (!nextValue) return;\r\n              event2.preventDefault();\r\n              send({ type: \"NAVIGATE\", value: nextValue, shiftKey, anchorValue: highlightedValue });\r\n            },\r\n            ArrowDown(event2) {\r\n              let nextValue = null;\r\n              if (isGridCollection(collection2) && highlightedValue) {\r\n                nextValue = collection2.getNextRowValue(highlightedValue);\r\n              } else if (highlightedValue) {\r\n                nextValue = collection2.getNextValue(highlightedValue);\r\n              }\r\n              if (!nextValue && (prop(\"loopFocus\") || !highlightedValue)) {\r\n                nextValue = collection2.firstValue;\r\n              }\r\n              if (!nextValue) return;\r\n              event2.preventDefault();\r\n              send({ type: \"NAVIGATE\", value: nextValue, shiftKey, anchorValue: highlightedValue });\r\n            },\r\n            ArrowLeft() {\r\n              if (!isGridCollection(collection2) && prop(\"orientation\") === \"vertical\") return;\r\n              let nextValue = highlightedValue ? collection2.getPreviousValue(highlightedValue) : null;\r\n              if (!nextValue && prop(\"loopFocus\")) {\r\n                nextValue = collection2.lastValue;\r\n              }\r\n              if (!nextValue) return;\r\n              event.preventDefault();\r\n              send({ type: \"NAVIGATE\", value: nextValue, shiftKey, anchorValue: highlightedValue });\r\n            },\r\n            ArrowRight() {\r\n              if (!isGridCollection(collection2) && prop(\"orientation\") === \"vertical\") return;\r\n              let nextValue = highlightedValue ? collection2.getNextValue(highlightedValue) : null;\r\n              if (!nextValue && prop(\"loopFocus\")) {\r\n                nextValue = collection2.firstValue;\r\n              }\r\n              if (!nextValue) return;\r\n              event.preventDefault();\r\n              send({ type: \"NAVIGATE\", value: nextValue, shiftKey, anchorValue: highlightedValue });\r\n            },\r\n            Home(event2) {\r\n              event2.preventDefault();\r\n              let nextValue = collection2.firstValue;\r\n              send({ type: \"NAVIGATE\", value: nextValue, shiftKey, anchorValue: highlightedValue });\r\n            },\r\n            End(event2) {\r\n              event2.preventDefault();\r\n              let nextValue = collection2.lastValue;\r\n              send({ type: \"NAVIGATE\", value: nextValue, shiftKey, anchorValue: highlightedValue });\r\n            },\r\n            Enter() {\r\n              send({ type: \"ITEM.CLICK\", value: highlightedValue });\r\n            },\r\n            a(event2) {\r\n              if (isCtrlOrMetaKey(event2) && computed(\"multiple\") && !prop(\"disallowSelectAll\")) {\r\n                event2.preventDefault();\r\n                send({ type: \"VALUE.SET\", value: collection2.getValues() });\r\n              }\r\n            },\r\n            Space(event2) {\r\n              if (isTypingAhead && prop(\"typeahead\")) {\r\n                send({ type: \"CONTENT.TYPEAHEAD\", key: event2.key });\r\n              } else {\r\n                keyMap.Enter?.(event2);\r\n              }\r\n            },\r\n            Escape(event2) {\r\n              if (prop(\"deselectable\") && value.length > 0) {\r\n                event2.preventDefault();\r\n                event2.stopPropagation();\r\n                send({ type: \"VALUE.CLEAR\" });\r\n              }\r\n            }\r\n          };\r\n          const exec = keyMap[getEventKey(event)];\r\n          if (exec) {\r\n            exec(event);\r\n            return;\r\n          }\r\n          const target = getEventTarget(event);\r\n          if (isEditableElement(target)) {\r\n            return;\r\n          }\r\n          if (getByTypeahead.isValidEvent(event) && prop(\"typeahead\")) {\r\n            send({ type: \"CONTENT.TYPEAHEAD\", key: event.key });\r\n            event.preventDefault();\r\n          }\r\n        }\r\n      });\r\n    }\r\n  };\r\n}\r\nvar machine = createMachine({\r\n  props({ props: props2 }) {\r\n    return {\r\n      loopFocus: false,\r\n      composite: true,\r\n      defaultValue: [],\r\n      multiple: false,\r\n      typeahead: true,\r\n      collection: collection.empty(),\r\n      orientation: \"vertical\",\r\n      selectionMode: \"single\",\r\n      ...props2\r\n    };\r\n  },\r\n  context({ prop, bindable }) {\r\n    return {\r\n      value: bindable(() => ({\r\n        defaultValue: prop(\"defaultValue\"),\r\n        value: prop(\"value\"),\r\n        isEqual,\r\n        onChange(value) {\r\n          const items = prop(\"collection\").findMany(value);\r\n          return prop(\"onValueChange\")?.({ value, items });\r\n        }\r\n      })),\r\n      highlightedValue: bindable(() => ({\r\n        defaultValue: prop(\"defaultHighlightedValue\") || null,\r\n        value: prop(\"highlightedValue\"),\r\n        sync: true,\r\n        onChange(value) {\r\n          prop(\"onHighlightChange\")?.({\r\n            highlightedValue: value,\r\n            highlightedItem: prop(\"collection\").find(value),\r\n            highlightedIndex: prop(\"collection\").indexOf(value)\r\n          });\r\n        }\r\n      })),\r\n      highlightedItem: bindable(() => ({\r\n        defaultValue: null\r\n      })),\r\n      selectedItems: bindable(() => {\r\n        const value = prop(\"value\") ?? prop(\"defaultValue\") ?? [];\r\n        const items = prop(\"collection\").findMany(value);\r\n        return { defaultValue: items };\r\n      }),\r\n      valueAsString: bindable(() => {\r\n        const value = prop(\"value\") ?? prop(\"defaultValue\") ?? [];\r\n        return { defaultValue: prop(\"collection\").stringifyMany(value) };\r\n      }),\r\n      focused: bindable(() => ({\r\n        defaultValue: false\r\n      }))\r\n    };\r\n  },\r\n  refs({ prop }) {\r\n    return {\r\n      typeahead: { ...getByTypeahead.defaultOptions },\r\n      prevCollection: prop(\"collection\")\r\n    };\r\n  },\r\n  computed: {\r\n    hasSelectedItems: ({ context }) => context.get(\"value\").length > 0,\r\n    isTypingAhead: ({ refs }) => refs.get(\"typeahead\").keysSoFar !== \"\",\r\n    isInteractive: ({ prop }) => !prop(\"disabled\"),\r\n    selection: ({ context, prop }) => {\r\n      const selection = new Selection(context.get(\"value\"));\r\n      selection.selectionMode = prop(\"selectionMode\");\r\n      selection.deselectable = !!prop(\"deselectable\");\r\n      return selection;\r\n    },\r\n    multiple: ({ prop }) => prop(\"selectionMode\") === \"multiple\" || prop(\"selectionMode\") === \"extended\"\r\n  },\r\n  initialState() {\r\n    return \"idle\";\r\n  },\r\n  watch({ context, prop, track, action }) {\r\n    track([() => context.get(\"value\").toString()], () => {\r\n      action([\"syncSelectedItems\"]);\r\n    });\r\n    track([() => context.get(\"highlightedValue\")], () => {\r\n      action([\"syncHighlightedItem\"]);\r\n    });\r\n    track([() => prop(\"collection\").toString()], () => {\r\n      action([\"syncCollection\"]);\r\n    });\r\n  },\r\n  effects: [\"trackFocusVisible\"],\r\n  on: {\r\n    \"HIGHLIGHTED_VALUE.SET\": {\r\n      actions: [\"setHighlightedItem\"]\r\n    },\r\n    \"ITEM.SELECT\": {\r\n      actions: [\"selectItem\"]\r\n    },\r\n    \"ITEM.CLEAR\": {\r\n      actions: [\"clearItem\"]\r\n    },\r\n    \"VALUE.SET\": {\r\n      actions: [\"setSelectedItems\"]\r\n    },\r\n    \"VALUE.CLEAR\": {\r\n      actions: [\"clearSelectedItems\"]\r\n    },\r\n    \"CLEAR.CLICK\": {\r\n      actions: [\"clearSelectedItems\"]\r\n    }\r\n  },\r\n  states: {\r\n    idle: {\r\n      effects: [\"scrollToHighlightedItem\"],\r\n      on: {\r\n        \"CONTENT.FOCUS\": {\r\n          actions: [\"setFocused\"]\r\n        },\r\n        \"CONTENT.BLUR\": {\r\n          actions: [\"clearFocused\"]\r\n        },\r\n        \"ITEM.CLICK\": {\r\n          actions: [\"setHighlightedItem\", \"selectHighlightedItem\"]\r\n        },\r\n        \"CONTENT.TYPEAHEAD\": {\r\n          actions: [\"highlightMatchingItem\"]\r\n        },\r\n        \"ITEM.POINTER_MOVE\": {\r\n          actions: [\"highlightItem\"]\r\n        },\r\n        \"ITEM.POINTER_LEAVE\": {\r\n          actions: [\"clearHighlightedItem\"]\r\n        },\r\n        NAVIGATE: {\r\n          actions: [\"setHighlightedItem\", \"selectWithKeyboard\"]\r\n        }\r\n      }\r\n    }\r\n  },\r\n  implementations: {\r\n    effects: {\r\n      trackFocusVisible: ({ scope }) => {\r\n        return trackFocusVisible({ root: scope.getRootNode?.() });\r\n      },\r\n      scrollToHighlightedItem({ context, prop, scope }) {\r\n        const exec = (immediate) => {\r\n          const highlightedValue = context.get(\"highlightedValue\");\r\n          if (highlightedValue == null) return;\r\n          const modality = getInteractionModality();\r\n          if (modality !== \"keyboard\") return;\r\n          const itemEl = getItemEl(scope, highlightedValue);\r\n          const contentEl2 = getContentEl(scope);\r\n          const scrollToIndexFn = prop(\"scrollToIndexFn\");\r\n          if (scrollToIndexFn) {\r\n            const highlightedIndex = prop(\"collection\").indexOf(highlightedValue);\r\n            scrollToIndexFn?.({ index: highlightedIndex, immediate });\r\n            return;\r\n          }\r\n          scrollIntoView(itemEl, { rootEl: contentEl2, block: \"nearest\" });\r\n        };\r\n        raf(() => exec(true));\r\n        const contentEl = () => getContentEl(scope);\r\n        return observeAttributes(contentEl, {\r\n          defer: true,\r\n          attributes: [\"data-activedescendant\"],\r\n          callback() {\r\n            exec(false);\r\n          }\r\n        });\r\n      }\r\n    },\r\n    actions: {\r\n      selectHighlightedItem({ context, prop, event, computed }) {\r\n        const value = event.value ?? context.get(\"highlightedValue\");\r\n        if (value == null) return;\r\n        const selection = computed(\"selection\");\r\n        const collection2 = prop(\"collection\");\r\n        if (event.shiftKey && computed(\"multiple\") && event.anchorValue) {\r\n          const next = selection.extendSelection(collection2, event.anchorValue, value);\r\n          invokeOnSelect(selection, next, prop(\"onSelect\"));\r\n          context.set(\"value\", Array.from(next));\r\n        } else {\r\n          const next = selection.select(collection2, value, event.metaKey);\r\n          invokeOnSelect(selection, next, prop(\"onSelect\"));\r\n          context.set(\"value\", Array.from(next));\r\n        }\r\n      },\r\n      selectWithKeyboard({ context, prop, event, computed }) {\r\n        const selection = computed(\"selection\");\r\n        const collection2 = prop(\"collection\");\r\n        if (event.shiftKey && computed(\"multiple\") && event.anchorValue) {\r\n          const next = selection.extendSelection(collection2, event.anchorValue, event.value);\r\n          invokeOnSelect(selection, next, prop(\"onSelect\"));\r\n          context.set(\"value\", Array.from(next));\r\n          return;\r\n        }\r\n        if (prop(\"selectOnHighlight\")) {\r\n          const next = selection.replaceSelection(collection2, event.value);\r\n          invokeOnSelect(selection, next, prop(\"onSelect\"));\r\n          context.set(\"value\", Array.from(next));\r\n        }\r\n      },\r\n      highlightItem({ context, event }) {\r\n        context.set(\"highlightedValue\", event.value);\r\n      },\r\n      highlightMatchingItem({ context, prop, event, refs }) {\r\n        const value = prop(\"collection\").search(event.key, {\r\n          state: refs.get(\"typeahead\"),\r\n          currentValue: context.get(\"highlightedValue\")\r\n        });\r\n        if (value == null) return;\r\n        context.set(\"highlightedValue\", value);\r\n      },\r\n      setHighlightedItem({ context, event }) {\r\n        context.set(\"highlightedValue\", event.value);\r\n      },\r\n      clearHighlightedItem({ context }) {\r\n        context.set(\"highlightedValue\", null);\r\n      },\r\n      selectItem({ context, prop, event, computed }) {\r\n        const collection2 = prop(\"collection\");\r\n        const selection = computed(\"selection\");\r\n        const next = selection.select(collection2, event.value);\r\n        invokeOnSelect(selection, next, prop(\"onSelect\"));\r\n        context.set(\"value\", Array.from(next));\r\n      },\r\n      clearItem({ context, event, computed }) {\r\n        const selection = computed(\"selection\");\r\n        const value = selection.deselect(event.value);\r\n        context.set(\"value\", Array.from(value));\r\n      },\r\n      setSelectedItems({ context, event }) {\r\n        context.set(\"value\", event.value);\r\n      },\r\n      clearSelectedItems({ context }) {\r\n        context.set(\"value\", []);\r\n      },\r\n      syncCollection({ context, prop, refs }) {\r\n        const collection2 = prop(\"collection\");\r\n        const highlightedItem = collection2.find(context.get(\"highlightedValue\"));\r\n        if (highlightedItem) context.set(\"highlightedItem\", highlightedItem);\r\n        const selectedItems = collection2.findMany(context.get(\"value\"));\r\n        context.set(\"selectedItems\", selectedItems);\r\n        const valueAsString = collection2.stringifyItems(selectedItems);\r\n        context.set(\"valueAsString\", valueAsString);\r\n        const highlightedValue = syncHighlightedValue(\r\n          collection2,\r\n          refs.get(\"prevCollection\"),\r\n          context.get(\"highlightedValue\")\r\n        );\r\n        queueMicrotask(() => {\r\n          context.set(\"highlightedValue\", highlightedValue);\r\n          refs.set(\"prevCollection\", collection2);\r\n        });\r\n      },\r\n      syncSelectedItems({ context, prop }) {\r\n        const collection2 = prop(\"collection\");\r\n        const prevSelectedItems = context.get(\"selectedItems\");\r\n        const value = context.get(\"value\");\r\n        const selectedItems = value.map((value2) => {\r\n          const item = prevSelectedItems.find((item2) => collection2.getItemValue(item2) === value2);\r\n          return item || collection2.find(value2);\r\n        });\r\n        context.set(\"selectedItems\", selectedItems);\r\n        context.set(\"valueAsString\", collection2.stringifyItems(selectedItems));\r\n      },\r\n      syncHighlightedItem({ context, prop }) {\r\n        const collection2 = prop(\"collection\");\r\n        const highlightedValue = context.get(\"highlightedValue\");\r\n        const highlightedItem = highlightedValue ? collection2.find(highlightedValue) : null;\r\n        context.set(\"highlightedItem\", highlightedItem);\r\n      },\r\n      setFocused({ context }) {\r\n        context.set(\"focused\", true);\r\n      },\r\n      clearFocused({ context }) {\r\n        context.set(\"focused\", false);\r\n      }\r\n    }\r\n  }\r\n});\r\nvar diff = (a, b) => {\r\n  const result = new Set(a);\r\n  for (const item of b) result.delete(item);\r\n  return result;\r\n};\r\nfunction invokeOnSelect(current, next, onSelect) {\r\n  const added = diff(next, current);\r\n  for (const item of added) {\r\n    onSelect?.({ value: item });\r\n  }\r\n}\r\nfunction syncHighlightedValue(collection2, prevCollection, highlightedValue) {\r\n  if (highlightedValue != null && !collection2.find(highlightedValue) && prevCollection) {\r\n    const startIndex = prevCollection.indexOf(highlightedValue);\r\n    const prevItems = [...prevCollection.items];\r\n    const items = [...collection2.items];\r\n    const diff2 = (prevItems?.length ?? 0) - (items?.length ?? 0);\r\n    let index = Math.min(\r\n      diff2 > 1 ? Math.max((startIndex ?? 0) - diff2 + 1, 0) : startIndex ?? 0,\r\n      (items?.length ?? 0) - 1\r\n    );\r\n    let newValue = null;\r\n    let isReverseSearching = false;\r\n    while (index >= 0) {\r\n      if (!collection2.getItemDisabled(items[index])) {\r\n        newValue = collection2.getItemValue(items[index]);\r\n        break;\r\n      }\r\n      if (index < items.length - 1 && !isReverseSearching) {\r\n        index++;\r\n      } else {\r\n        isReverseSearching = true;\r\n        if (index > (startIndex ?? 0)) {\r\n          index = startIndex ?? 0;\r\n        }\r\n        index--;\r\n      }\r\n    }\r\n    return newValue;\r\n  }\r\n  return null;\r\n}\r\nvar props = createProps()([\r\n  \"collection\",\r\n  \"defaultHighlightedValue\",\r\n  \"defaultValue\",\r\n  \"dir\",\r\n  \"disabled\",\r\n  \"deselectable\",\r\n  \"disallowSelectAll\",\r\n  \"getRootNode\",\r\n  \"highlightedValue\",\r\n  \"id\",\r\n  \"ids\",\r\n  \"loopFocus\",\r\n  \"onHighlightChange\",\r\n  \"onSelect\",\r\n  \"onValueChange\",\r\n  \"orientation\",\r\n  \"scrollToIndexFn\",\r\n  \"selectionMode\",\r\n  \"selectOnHighlight\",\r\n  \"typeahead\",\r\n  \"value\"\r\n]);\r\nvar splitProps = createSplitProps(props);\r\nvar itemProps = createProps()([\"item\", \"highlightOnHover\"]);\r\nvar splitItemProps = createSplitProps(itemProps);\r\nvar itemGroupProps = createProps()([\"id\"]);\r\nvar splitItemGroupProps = createSplitProps(itemGroupProps);\r\nvar itemGroupLabelProps = createProps()([\"htmlFor\"]);\r\nvar splitItemGroupLabelProps = createSplitProps(itemGroupLabelProps);\r\n\r\nexport { anatomy, collection, connect, gridCollection, itemGroupLabelProps, itemGroupProps, itemProps, machine, props, splitItemGroupLabelProps, splitItemGroupProps, splitItemProps, splitProps };\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}